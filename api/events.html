<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Events API | RAMP4 Documentation</title>
    <meta name="generator" content="VuePress 1.8.1">
    
    <meta name="description" content="documentation site">
    
    <link rel="preload" href="/ramp4-pcar4/assets/css/0.styles.342c25e1.css" as="style"><link rel="preload" href="/ramp4-pcar4/assets/js/app.ebba11e7.js" as="script"><link rel="preload" href="/ramp4-pcar4/assets/js/2.4ff3b741.js" as="script"><link rel="preload" href="/ramp4-pcar4/assets/js/8.c59bcb9a.js" as="script"><link rel="prefetch" href="/ramp4-pcar4/assets/js/10.5e4cf612.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/11.218787cc.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/12.b4de6476.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/13.29b1622c.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/14.04a8dd84.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/15.11435cca.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/16.bca20261.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/17.12d9c0b3.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/18.52725566.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/19.13f5ed78.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/20.ac1f0338.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/21.07b54cac.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/22.f1026ba4.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/23.c9acab28.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/24.3cfe8e22.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/3.3348aff5.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/4.ec439105.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/5.abd65e2b.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/6.36d4639b.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/7.7943861c.js"><link rel="prefetch" href="/ramp4-pcar4/assets/js/9.da860eed.js">
    <link rel="stylesheet" href="/ramp4-pcar4/assets/css/0.styles.342c25e1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/ramp4-pcar4/" class="home-link router-link-active"><!----> <span class="site-name">RAMP4 Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/ramp4-pcar4/" class="nav-link">
  Current
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/ramp4-pcar4/" class="nav-link">
  Current
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/ramp4-pcar4/api/events.html" aria-current="page" class="active sidebar-link">Events API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/events.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/events.html#primary-event-methods" class="sidebar-link">Primary Event Methods</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/events.html#secondary-event-methods" class="sidebar-link">Secondary Event Methods</a></li></ul></li><li><a href="/ramp4-pcar4/api/geometry.html" class="sidebar-link">API Geometry Classes</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#spatial-reference" class="sidebar-link">Spatial Reference</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#point" class="sidebar-link">Point</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#multipoint" class="sidebar-link">MultiPoint</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#line-string" class="sidebar-link">Line String</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#linear-ring" class="sidebar-link">Linear Ring</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#multi-line-string" class="sidebar-link">Multi Line String</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#polygon" class="sidebar-link">Polygon</a></li><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/geometry.html#multipolygon" class="sidebar-link">MultiPolygon</a></li></ul></li><li><a href="/ramp4-pcar4/api/migration.html" class="sidebar-link">API Migration Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ramp4-pcar4/api/migration.html#geom" class="sidebar-link">GEOM</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="events-api"><a href="#events-api" class="header-anchor">#</a> Events API</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>The events API provides an interface to manage events and event handlers on the RAMP instance event bus. Classic event busses (busi?) normally deal with named events and handler functions reacting to those events. This approach means to target an event handler (for example, to remove it), one needs a pointer to the handler function.</p> <p>Since RAMP provides a default setup, and that setup contains event handlers, this makes it difficult for a 3rd party to access those handlers. To get around this, the RAMP events API introduces event handler names. Interactions with the API use the handler name instead of the handler function, and default event handler names can be found in the documentation (TODO link to doc page) for anyone wishing to manipulate them.</p> <h2 id="primary-event-methods"><a href="#primary-event-methods" class="header-anchor">#</a> Primary Event Methods</h2> <h3 id="reacting-to-an-event"><a href="#reacting-to-an-event" class="header-anchor">#</a> Reacting to an Event</h3> <p>To have a function run whenever an event fires, use the <code>on()</code> method. Supply the event name to listen for, the function to act as the event handler, and optionally a handler name. The method will return the handler name; this will be the name provided in the parameter, or if none was supplied it will be the system generated handler name.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RAMP<span class="token punctuation">.</span>Instance</span><span class="token punctuation">(</span>domElement<span class="token punctuation">,</span> configs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">myHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doStuff</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'map/click'</span><span class="token punctuation">,</span> myHandler<span class="token punctuation">,</span> <span class="token string">'my_custom_map_click_handler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Similarly, the <code>once()</code> method can be used to set up a one-time event handler. After the handler is triggered by the event, it is unregistered automatically.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> rInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RAMP<span class="token punctuation">.</span>Instance</span><span class="token punctuation">(</span>domElement<span class="token punctuation">,</span> configs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">myOneTimeHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doStuff</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">'map/click'</span><span class="token punctuation">,</span> myOneTimeHandler<span class="token punctuation">,</span> <span class="token string">'my_custom_onetime_map_click_handler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="removing-an-event-handler"><a href="#removing-an-event-handler" class="header-anchor">#</a> Removing an Event Handler</h3> <p>To cause an active event handler to stop reacting to an event, use the <code>off()</code> method. The event handler name is required to locate the handler to remove.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// remove the handler set up in the .on() example</span>
rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'my_custom_map_click_handler'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="manually-firing-an-event"><a href="#manually-firing-an-event" class="header-anchor">#</a> Manually Firing an Event</h3> <p>To trigger an event, use the <code>emit()</code> method. The event can be an existing event used by the RAMP core, or can be a new custom event. Any handlers listening for the event will be executed. If the handlers are expecting a set of parameters, they are supplied after the event name.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// manually trigger a map click event</span>
rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'map/click'</span><span class="token punctuation">,</span> clickCoordinatesPayload<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>While event names can be any string, it is suggested using the <code>domain/description</code> format. If the event is tied to a fixture, it is suggested the fixture name be used for the domain. E.g. <code>imagetool/image_enhanced</code>.</p> <h2 id="secondary-event-methods"><a href="#secondary-event-methods" class="header-anchor">#</a> Secondary Event Methods</h2> <h3 id="list-of-registered-events"><a href="#list-of-registered-events" class="header-anchor">#</a> List of Registered Events</h3> <p>The <code>eventNames()</code> method will return an array of event names that have registered their name with the event API. This is mostly handy for debugging, checking the spelling of event names, etc. Note that this returns event names, not event handler names. Also note that it is possible to have active events that did not register, and thus are not in this array.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> enames <span class="token operator">=</span> rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">eventNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// enames -&gt; ['map/click', 'map/extentchanged', ...]</span>
</code></pre></div><h3 id="registering-an-event"><a href="#registering-an-event" class="header-anchor">#</a> Registering an Event</h3> <p>To have an event name show up in the <code>eventNames()</code> result, it can be registerd using the <code>registerEventName()</code> method. An ideal place for this call would be in the startup code of a fixture that exposes some events. An array of names can also be provided. Duplicate registrations will be ignored.</p> <div class="language-js extra-class"><pre class="language-js"><code>rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">registerEventName</span><span class="token punctuation">(</span><span class="token string">'page/customevent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">registerEventName</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'imagetool/image_enhanced'</span><span class="token punctuation">,</span> <span class="token string">'imagetool/image_saved'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="list-of-active-event-handlers"><a href="#list-of-active-event-handlers" class="header-anchor">#</a> List of Active Event Handlers</h3> <p>The <code>activeHandlers()</code> method will return an array of event handler names that are active. This is handy for checking if a handler is already active, and for debugging. An optional parameter will filter the results to handlers for a specific event.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> allnames <span class="token operator">=</span> rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">activeHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> extentnames <span class="token operator">=</span> rInstance<span class="token punctuation">.</span>event<span class="token punctuation">.</span><span class="token function">activeHandlers</span><span class="token punctuation">(</span><span class="token string">'map/extentchanged'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// allnames -&gt; ['handlername1', 'image_enhancer', ...]</span>
<span class="token comment">// extentnames -&gt; ['update_extent_filter', 'geosearch_extent_update']</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/ramp4-pcar4/api/geometry.html">
        API Geometry Classes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/ramp4-pcar4/assets/js/app.ebba11e7.js" defer></script><script src="/ramp4-pcar4/assets/js/2.4ff3b741.js" defer></script><script src="/ramp4-pcar4/assets/js/8.c59bcb9a.js" defer></script>
  </body>
</html>
