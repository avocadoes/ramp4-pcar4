(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{369:function(t,e,s){"use strict";s.r(e);var a=s(42),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"panels"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#panels"}},[t._v("#")]),t._v(" Panels")]),t._v(" "),s("h2",{attrs:{id:"todo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#todo"}},[t._v("#")]),t._v(" TODO")]),t._v(" "),s("p",[t._v("Write other stuff.")]),t._v(" "),s("h2",{attrs:{id:"localization"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#localization"}},[t._v("#")]),t._v(" Localization")]),t._v(" "),s("h3",{attrs:{id:"core"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#core"}},[t._v("#")]),t._v(" Core")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://kazupon.github.io/vue-i18n/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vue-i18n"),s("OutboundLink")],1),t._v(" is used to localize the application and the core messages are injected into the RAMP instance when it's first created. All messages are stored in a CSV file of the following format:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("key")]),t._v(" "),s("th",[t._v("enValue")]),t._v(" "),s("th",[t._v("enValid")]),t._v(" "),s("th",[t._v("frValue")]),t._v(" "),s("th",[t._v("frValid")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("lang-native")]),t._v(" "),s("td",[t._v("English")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("Français")]),t._v(" "),s("td",[t._v("1")])])])]),t._v(" "),s("p",[t._v("First column is the message key that will be used in component templates, and the rest of the file is split into languages sections, two columns per language. The first of these columns specifies a locale value for the message key and the second indicates if the value has been confirmed to be correct or if it's a mere placeholder (1 - valid; 0 - not valid).")]),t._v(" "),s("p",[t._v("Right now, only two languages are included, but it's possible to add new languages following the same pattern--adding two columns ("),s("code",[t._v("xxValue")]),t._v(" and "),s("code",[t._v("xxValid")]),t._v(") per language where the first two letters are the short, two-letter language code.")]),t._v(" "),s("h3",{attrs:{id:"fixtures"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fixtures"}},[t._v("#")]),t._v(" Fixtures")]),t._v(" "),s("p",[t._v("Fixtures themselves do not require localization, but they "),s("strong",[t._v("must")]),t._v(" provide locale messages to panels, screens, and on-map components it creates. There are several ways to do that.")]),t._v(" "),s("h4",{attrs:{id:"panel-registration-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#panel-registration-options"}},[t._v("#")]),t._v(" Panel Registration Options")]),t._v(" "),s("p",[t._v("Pass locale messages as part of the "),s("code",[t._v("PanelRegistrationOptions")]),t._v(" when registering panels:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// fixture.ts")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with a single panel")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$iApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("panel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'panel-one'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        config"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            screens"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        i18n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("i18nOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or several panels")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$iApi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("panel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'panel-one'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            screens"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'panel-two'")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            screens"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        i18n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("i18nOptions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("code",[t._v("i18n")]),t._v(" options use the following type:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("type I18nComponentOptions = {\n    messages?: VueI18n.LocaleMessages;  // https://kazupon.github.io/vue-i18n/guide/messages.html#structure\n    dateTimeFormats?: VueI18n.DateTimeFormats;  // https://kazupon.github.io/vue-i18n/guide/datetime.html#datetime-localization\n    numberFormats?: VueI18n.NumberFormats;  // https://kazupon.github.io/vue-i18n/guide/number.html#custom-formatting\n    sharedMessages?: VueI18n.LocaleMessages;\n};\n")])])]),s("p",[t._v("The above code will merge "),s("code",[t._v("messages")]),t._v(", "),s("code",[t._v("dateTimeFormats")]),t._v(" and "),s("code",[t._v("numberFormats")]),t._v(" into the corresponding global locales, while the "),s("code",[t._v("sharedMessages")]),t._v(" property will be ignored.")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("Important:")]),t._v("\nBecause all values are merged into the global locales, all components--even ones that do not belong to this panel or fixtures--will be able to use these messages. There is a potential for key name collisions.")]),t._v(" "),s("p",[t._v("As a rule of thumb, fixture locale keys should be prefixed with the fixture name (or its abbreviation ("),s("code",[t._v("basemap")]),t._v(" => "),s("code",[t._v("bm")]),t._v(") for brevity):")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("key")]),t._v(" "),s("th",[t._v("enValue")]),t._v(" "),s("th",[t._v("enValid")]),t._v(" "),s("th",[t._v("frValue")]),t._v(" "),s("th",[t._v("frValid")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("**basemap.**refresh")]),t._v(" "),s("td",[t._v("Map refresh required")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("Actualiser la carte")]),t._v(" "),s("td",[t._v("1")])]),t._v(" "),s("tr",[s("td",[t._v("**basemap.**select")]),t._v(" "),s("td",[t._v("Select basemap")]),t._v(" "),s("td",[t._v("1")]),t._v(" "),s("td",[t._v("Sélectionner la carte de base")]),t._v(" "),s("td",[t._v("1")])])])])]),t._v(" "),s("h4",{attrs:{id:"vue-component-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-component-options"}},[t._v("#")]),t._v(" Vue Component Options")]),t._v(" "),s("p",[t._v("Additionally, it's possible to provide locale messages directly to the screen component as follows:")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// screen-component.vue")]),t._v("\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    i18n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        messages"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            en"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                hello"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The above requires hardcoding locale string into the component file. If using a CSV file, "),s("code",[t._v("ramp-locale-loader")]),t._v(" will fold the CSV content into the "),s("code",[t._v("VueI18n.LocaleMessages")]),t._v(" form automatically (the file name needs to end in "),s("code",[t._v("lang.csv")]),t._v("):")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// screen-component.vue")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" messages "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lang.csv'")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    i18n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        messages\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("The above approach can be used in the core fixtures and in external fixtures compiled with webpack given that "),s("code",[t._v("ramp-locale-loader")]),t._v(" package is used. For all other cases, it's responsibility of the fixture to format their locale messages appropriately as "),s("code",[t._v("VueI18n.LocaleMessages")]),t._v(".")]),t._v(" "),s("p",[t._v("If two methods of passing locale messages are used, more specific "),s("code",[t._v("i18n")]),t._v(" options take precedence:")]),t._v(" "),s("ul",[s("li",[t._v("component file options")]),t._v(" "),s("li",[t._v("common panel registration options")])]),t._v(" "),s("p",[t._v("If the string key cannot be found there, "),s("code",[t._v("i18n")]),t._v(" falls back to the core strings, so it's possible to use any of the common core strings in any screen components without specifying any locale messages at all.")]),t._v(" "),s("h3",{attrs:{id:"non-fixture-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#non-fixture-components"}},[t._v("#")]),t._v(" Non-Fixture Components")]),t._v(" "),s("p",[t._v("A fixture is not required for registering panels or creating on-map components--this can be done directly on the RAMP API. The ways of providing localization in such cases are exactly the same as when using a fixture.")])])}),[],!1,null,null,null);e.default=n.exports}}]);